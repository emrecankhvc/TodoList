@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer
@model TodoProject.Entities.TodoItem
@{
    ViewData["Title"] = @Localizer["PageTitle"];
}

<div class="container mt-5">
    <h2 class="mb-4 text-success">@Localizer["PageTitle"]</h2>

    @if (!ViewData.ModelState.IsValid)
    {
        <div class="alert alert-danger">
            <ul>
                @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                {
                    <li>@error.ErrorMessage</li>
                }
            </ul>
        </div>
    }

    <form asp-action="Create" method="post">
        @await Html.PartialAsync("_TodoFormCreatePartial")
    </form>
</div>

@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial");

    <script>
        function checkOtherCategory() {
            const selectedValue = document.getElementById("Category").value;
            const otherDiv = document.getElementById("otherCategoryDiv");
            const otherInput = document.getElementById("OtherCategory");

            if (selectedValue === "Other") {
                otherDiv.style.display = "block";
            } else {
                otherDiv.style.display = "none";
                otherInput.value = "";
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            const categorySelect = document.getElementById("Category");
            categorySelect.addEventListener("change", checkOtherCategory);
            checkOtherCategory(); // Sayfa yüklendiğinde kontrol
        });
    </script>
    
}
